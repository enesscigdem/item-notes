<Window
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:ItemNotes.UI.ViewModels"
    xmlns:conv="clr-namespace:ItemNotes.UI.Converters"
    x:Class="ItemNotes.UI.Views.MainWindow"
    Title="Item Notes"
    Width="600"
    Height="450">
    <Window.Resources>
        <conv:NoteColorToBrushConverter x:Key="NoteColorToBrushConverter"/>
    </Window.Resources>

    <DockPanel>
        <!-- Üst menü -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Dosya">
                <MenuItem Header="_Yeni Not"  Command="{Binding CreateNoteCommand}" />
                <MenuItem Header="_Seçileni Aç"  Command="{Binding OpenNoteCommand}" />
                <MenuItem Header="_Seçileni Sil" Command="{Binding DeleteNoteCommand}" />
                <Separator/>
                <!-- Çıkış menü öğesi, code‑behind’de OnExit tanımlanmalı -->
                <MenuItem Header="_Çıkış" Click="OnExit"/>
            </MenuItem>
            <MenuItem Header="_Yardım">
                <MenuItem Header="_Hakkında"/>
            </MenuItem>
        </Menu>

        <!-- Renkli not listesi -->
        <ListBox ItemsSource="{Binding Notes}"
                 SelectedItem="{Binding SelectedNote}"
                 BorderThickness="0"
                 Margin="10">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border CornerRadius="8"
                            Padding="8"
                            Margin="5"
                            Background="{Binding Color, Converter={StaticResource NoteColorToBrushConverter}}">
                        <StackPanel>
                            <TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="16"/>
                            <TextBlock Text="{Binding CreatedAt, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}"
                                       FontSize="11"/>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</Window>
