<Window
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:vm="clr-namespace:ItemNotes.UI.ViewModels"
  xmlns:conv="clr-namespace:ItemNotes.UI.Converters"
  xmlns:avrtb="clr-namespace:AvRichTextBox;assembly=Simplecto.Avalonia.RichTextBox"
  xmlns:avRichTextBox="clr-namespace:AvRichTextBox;assembly=AvRichTextBox"
  x:Class="ItemNotes.UI.Views.NoteWindow"
  Title="Not Düzenleyici"
  Width="900" Height="700"
  Background="{Binding Note.Color, Converter={StaticResource NoteColorToBrushConverter}}">

  <Window.Resources>
    <conv:NoteColorToBrushConverter x:Key="NoteColorToBrushConverter" />
  </Window.Resources>

  <DockPanel Margin="10">
    <ScrollViewer DockPanel.Dock="Top" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Hidden">
      <StackPanel Orientation="Horizontal" Spacing="5">
        <Button Content="Kalın" Command="{Binding BoldCommand}" />
        <Button Content="İtalik" Command="{Binding ItalicCommand}" />
        <Button Content="Altı Çizili" Command="{Binding UnderlineCommand}" />
        <Button Content="Üstü Çizili" Command="{Binding StrikethroughCommand}" />
        <Button Content="Madde İşareti" Command="{Binding BulletListCommand}" />
        <Button Content="Resim Ekle" Command="{Binding InsertImageCommand}" />
        <Button Content="Tablo Ekle" Command="{Binding InsertTableCommand}" />
        <Button Content="Sembol Ekle" Command="{Binding InsertSymbolCommand}" />
        <Button Content="Bağlantı" Command="{Binding InsertLinkCommand}" />
        <Button Content="Sayfa Ekle" Command="{Binding AddPageCommand}" />
      </StackPanel>
    </ScrollViewer>

    <!-- Items -> ItemsSource -->
    <Border Background="White" CornerRadius="6" Margin="0,10,0,0" Padding="10">
    <TabControl ItemsSource="{Binding Pages}" SelectedItem="{Binding SelectedPage}">
      <TabControl.ItemTemplate>
        <DataTemplate>
          <TextBlock Text="{Binding Header}" />
        </DataTemplate>
      </TabControl.ItemTemplate>

      <!-- DataTemplate içindeyken DataContext = PageViewModel -->
      <TabControl.ContentTemplate>
        <DataTemplate>
          <avRichTextBox:RichTextBox
            FlowDocument="{Binding SelectedPage.Document}"
            IsReadOnly="{Binding SelectedPage.IsReadOnly}" />
        </DataTemplate>
      </TabControl.ContentTemplate>
    </TabControl>
    </Border>

    <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0" Spacing="10">
      <TextBlock Text="{Binding Note.CreatedBy}" />
      <TextBlock Text="{Binding Note.CreatedAt, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}" />
    </StackPanel>
  </DockPanel>
</Window>
